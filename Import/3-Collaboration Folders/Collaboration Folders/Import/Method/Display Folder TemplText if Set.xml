<AML>
 <Item type="Method" id="D392B9A7924B4F028926AB1A278432A7" action="add">
  <execution_allowed_to keyed_name="World" type="Identity">A73B655731924CD0B027E4F4D5FCC0A9</execution_allowed_to>
  <method_code><![CDATA[//debugger;
var cff = new CommonFormFunctions("Item Folder");
var thisItem = top.aras.newIOMItem("","");
thisItem.loadAML(document.item.xml);
var isTemplate = (thisItem.getProperty("is_template","0") === "1");

var element = document.getElementsByName("is_folder_templ_white_box")[0];
if (element && isTemplate) {
  var parentElem = element.parentNode;
  if (parentElem) {parentElem.removeChild(element);}
  //cff.setVisibilityOfFieldByPropName("is_folder_templ_white_box",!isTemplate);
}

cff.setVisibilityOfFieldByPropName("allow_sub_folders",isTemplate);
cff.setVisibilityOfFieldByPropName("allowed_relationships",isTemplate);
cff.setVisibilityOfFieldByPropName("related_project_keyed_name",!isTemplate);

//if top folder ...
//field must be disabled by default
if (thisItem.getProperty("is_root","0") === "1" && !isTemplate) {
  cff.enableFieldByPropName("text", "related_project_keyed_name", true);
  if (thisItem.getProperty("related_project_keyed_name","") !== "") {
    cff.enableFieldByPropName("text", "related_project_keyed_name", false);
  }
}
else {
  cff.enableFieldByPropName("text", "related_project_keyed_name", false);
}

return;]]></method_code>
  <method_type>JavaScript</method_type>
  <name>Display Folder TemplText if Set</name>
 </Item>
</AML>